/* Stcky Footer for Contao
 * @author: Joe Ray Gregory aka may17
 * @copyright: Joe Ray Gregory 2012 - 2013 joe@may17.de
 * @license LGPL
 */
(function(){var a={init:function(){var b=document.getElement(".tl_formbody_submit")||false,f,e,g,d=document.id("easy_themes")||false,c=this;if(b){this.footerData=this.generateSubmitObj(b);this.generateOffset();this.setStickyPosition(b);f=this.setItem.bind(this);window.addEvents({scroll:f,resize:f,ajax_change:f});window.addEvent("resize",this.setStickyPosition.bind(this).pass(b));e=$$("fieldset");e.addEvent("click:relay(legend)",function(h){c.setItem()});e.addEvent("click:relay(input.tl_checkbox[onclick])",function(h){c.setItem()});g=document.id("tog")||false;if(g){g.addEvent("click",function(){c.setItem()})}f()}if(d){if(d.getStyle("display")=="none"){d.setStyle("display","block")}}},generateSubmitObj:function(b){var c=b.getFirst(),d=(!Browser.opera)?c.getStyle("width"):window.getComputedStyle(c,"").getPropertyValue("width");return{item:b,submitContainer:c,height:c.getHeight(),width:d,offset:0,position:c.getCoordinates()}},generateOffset:function(){var b=document.getElement("div#debug")||false;if(b){var c=b.getElement("p").getSize().y+b.getElement("div").getSize().y-1;this.footerData.submitContainer.setStyle("bottom",c);this.footerData.offset=c}},setStickyPosition:function(b){this.footerData.submitContainer.setStyle("left",b.getPosition().x)},setItem:function(i){var j=this.generateOffset(),c=this.footerData.item.getPosition().y+this.footerData.height+this.footerData.offset,h=window,g=c-h.getHeight(),f=document.body,d="stickySave",b=h.getScroll().y.toInt();if(b>g){f.removeClass(d)}else{if(!f.hasClass(d)){this.footerData.submitContainer.setStyle("width",this.footerData.width);f.addClass(d)}}}};window.addEvent("domready",function(){a.init()})})();